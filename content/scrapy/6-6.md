---
title: 'λ°μ΄ν„° ν›„μ²λ¦¬ λ° μ €μ¥'
slug: 6-6
category: '6. [ν”„λ΅μ νΈ] 11λ²κ°€ μ‚¬μ΄νΈ μΉ΄ν…κ³ λ¦¬λ³„ λ² μ¤νΈ μƒν’ ν¬λ΅¤λ§'
---

ν•λ‚μ μΉ΄ν…κ³ λ¦¬ λ‹Ή μµλ€ 500κ°μ λ² μ¤νΈ μƒν’μ΄ μκ³  ν¬λ΅¤λ§ ν•λ©΄ 2μ£Όμ°¨μ²λΌ κ°κ° 40κ°μ”© λ°μ΄ν„°κ°€ λ‚μ¬ ν…λ°, μ €μ¥ν•κΈ°μ—λ” λ„λ¬΄ λ§μΌλ‹ ν›„μ²λ¦¬λ¥Ό ν†µν•΄ λ­ν‚Ή 1μ„~5μ„κΉμ§€λ§ μ €μ¥μ„ ν•΄λ΄…μ‹λ‹¤.

```python
#pipelines.py
from itemadapter import ItemAdapter
from scrapy.exceptions import DropItem

class St11Pipeline:
    def process_item(self, item, spider):
        if int(item['ranking']) <= 5:    # λ­ν‚Ήμ΄ 5λ³΄λ‹¤ μ‘κ±°λ‚ κ°™μΌλ©΄
            return item    # κ·Έλ€λ΅ return
        else: 
            raise DropItem("μμ„κ¶ λ°–", item)    # μ•„λ‹λ©΄ raise error
```

**pipelines.py**λ¥Ό μμ •ν–μΌλ‹ μ„¤μ •μΌλ΅ pipelineμ„ μ‚¬μ©ν•λ‹¤κ³  μ •μν•΄μ¤μ•Όκ² μ£ ? κ·Έλ¦¬κ³  λ°μ΄ν„° μ €μ¥μ„ μμκ² ν•κΈ° μ„ν•΄ μ €μ¥λ  μ•„μ΄ν…λ“¤μ μμ„λ¥Ό μ •ν•΄μ¤μ‹λ‹¤.

```python
#settings.py
ITEM_PIPELINES = {    # μ£Όμ„(#)λ§ μ—†μ• μ£Όλ©΄ λ¨
    'st11.pipelines.St11Pipeline': 300,
}

# μ•„μ΄ν… μ¶λ ¥ μμ„ μ„¤μ •: μ§μ ‘ μ½”λ“ μ¶”κ°€
FEED_EXPORT_FIELDS = ['main_category_name', 'sub_category_name', 'ranking', 'title', 'ori_price', 'dis_price']
```

β“  **κ¶κΈν•΄μ”:** μ•„μ΄ν… μμ„λ¥Ό μ§€μ •ν•μ§€ μ•μΌλ©΄ μ–΄λ–»κ² λλ‚μ”?
> μ΄λ ‡κ² λ©λ‹λ‹¤ βΉ
>
> ![8.png](/scrapy/6-6/8.png)

μ΄μ  λ§μ§€λ§‰μΌλ΅ ν¬λ΅¤λ§ν• λ°μ΄ν„°λ¥Ό μ €μ¥ν•κ³ , μ ν¬λ΅¤λ§ λμ—λ”μ§€ μ‚¬μ΄νΈμ™€ λ‡ κ° λΉ„κµν•λ©° ν™•μΈν•΄λ΄…μ‹λ‹¤.

```powershell
#ν„°λ―Έλ„
# DOWNLOAD_DELAY μ„¤μ •μ„ ν•λ©΄ λ„λ¬΄ λλ ¤μ§ μ μμΌλ‹, λ°λ“μ‹ μ£Όμ„μ²λ¦¬ ν• λ’¤ μ‹¤ν–‰ν•  κ²ƒ!!!
scrapy crawl st11_best -o st11_best.csv -t csv
```

λ…λ Ήμ„ μν–‰ν• λ””λ ‰ν† λ¦¬μ— νμΌμ΄ μ μ €μ¥λμ—λ”μ§€ ν™•μΈν•΄λ³΄μ‹κΈ° λ°”λλ‹λ‹¤. μ €μ¥ν• κ²°κ³Ό νμΌμ λ°μ΄ν„° μλ” 205(μ „μ²΄ μΉ΄ν…κ³ λ¦¬ κ°μ) * 5(μμ„) = 1025(μ „μ²΄ λ°μ΄ν„° μ)μ—¬μ•Ό ν•λ”λ° μ«μκ°€ λ‹¬λΌμ„ νμ΄μ¬μ—μ„ pd.read_csvλ΅ μ‚΄ν΄λ³΄λ‹, 'ν™&μΉ΄μ„λΉ„μ¤'μ μ„λΈ μΉ΄ν…κ³ λ¦¬μ—μ„ λ­ν‚Ήμ΄ 5μ„κΉμ§€ μ—†λ” μ„λΈ μΉ΄ν…κ³ λ¦¬κ°€ μμ—μµλ‹λ‹¤. μ κ°€ ν¬λ΅¤λ§ν•  λ‹Ήμ‹ μ‚¬μ΄νΈμ—μ„ μ§μ ‘ μ„Έλ³΄λ‹ 17κ°μ λ°μ΄ν„°κ°€ λ¶€μ΅±ν–κ³  csv νμΌμ μ²«λ²μ§Έ μ¤„μ€ μ•„μ΄ν…λ…(μ»¬λΌλ…)μ΄λ‹ csv νμΌμ€ 1009μ¤„λ΅ μ•λ§κ² μ €μ¥λμ–΄ μμ—μµλ‹λ‹¤.

λ§μ§€λ§‰μΌλ΅, νμΌμ„ ν™•μΈν•΄λ³΄λ©΄ μ €μ¥μ΄ μ λ κ²ƒμ„ ν™•μΈν•  μ μμ—μµλ‹λ‹¤. κ·Έλ¦¬κ³  λ¬΄μ‘μ„λ΅ μ •ν• (λ·°ν‹°, μ„ μΌ€μ–΄) ν•­λ©μ λ² μ¤νΈ μƒν’ λ‚΄μ©κ³Ό csv νμΌμ— μ €μ¥λ λ‚΄μ©μ„ μ§μ ‘ λ€μ΅°ν•΄λ³΄λ©΄ μ •λ³΄κ°€ μ •ν™•ν μΌμΉν•μ—¬ μ ν¬λ΅¤λ§ λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤ π†

![9.png](/scrapy/6-6/9.png)

![10.png](/scrapy/6-6/10.png)

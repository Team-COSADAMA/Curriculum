---
title: 'ë°ì´í„° í›„ì²˜ë¦¬í•˜ê¸°'
slug: 5-4
category: '5. í¬ë¡¤ë§ ë°ì´í„° ë‹¤ë£¨ê¸°'
---

Itemì˜ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ì „ ì›í•˜ëŠ” ëŒ€ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ **Item Pipeline(ì´í•˜ Pipeline)** ì…ë‹ˆë‹¤.

ğŸ’¡ **Pipeline**
>   
> Pipelineì€ **process_item()** ì´ë¼ëŠ” íŠ¹ì •í•œ ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ê°€ì§„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
>    
> í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒ ìƒì„±í–ˆì„ ë•Œ **pipelines.py**ì— í´ë˜ìŠ¤ì˜ ê¸°ë³¸ í˜•íƒœê°€ ì•„ë˜ì²˜ëŸ¼ ì‘ì„±ë˜ì–´ ìˆì–´ìš”.
>     
> ![20](/scrapy/5-4/20.png)
>     
> spiderì˜ ì½œë°± í•¨ìˆ˜ **parse()** ì—ì„œ **yield**í•œ Itemì€ ë°˜ë“œì‹œ Pipelineì˜ **process_item()** ë©”ì„œë“œë¥¼ ê±°ì³ê°€ê²Œ ë©ë‹ˆë‹¤. 
> 
> ë”°ë¼ì„œ **process_item()** ë©”ì„œë“œë¥¼ í†µí•´ ì›í•˜ëŠ” Itemì€ **return** í•´ì£¼ê³ , ì›í•˜ì§€ ì•ŠëŠ” Itemì€ **raise DropItem**ì„ í†µí•´ í•„í„°ë§í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
>    
> ```python
> # ì‹¤ì œ íŒŒì¼ ìˆ˜ì •ì€ í•˜ì§€ ë§ê³  ëˆˆìœ¼ë¡œë§Œ ì½ì„ ê²ƒ!
> # ì˜ˆ: ìƒí’ˆê°€ê²©(íŒë§¤ê°€ê²©)ì´ 10,000ì› ì´ìƒì¸ ê²½ìš°ì—ë§Œ ìƒí’ˆê°€ê²© í¬ë¡¤ë§
>  
> from itemadapter import ItemAdapter
> from scrapy.exceptions import DropItem
> 
> class St11Pipeline:
>     def process_item(self, item, spider):
>         if int(item['price']) > 10000:
>             return item
>         else:
>             raise DropItem('dropitem', item)
> ```
>     
> ë‹¨, Pipelineì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” **settings.py**ì—ì„œ ë‹¤ìŒ ì½”ë“œë¥¼ ì°¾ì•„ ì£¼ì„(#)ì„ ì—†ì• ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
>     
> ```python
> #settings.py
> ITEM_PIPELINES = {
>     'st11.pipelines.St11Pipeline': 300,     # ìˆ«ì(0 ~ 1000 ì…ë ¥)ëŠ” Pipelineì˜ ì ìš© ìˆœì„œë¥¼ ì˜ë¯¸
> }                                           # ìˆ«ìê°€ ì‘ì€ ê²ƒë¶€í„° ì°¨ë¡€ëŒ€ë¡œ ì ìš©ë¨
> ```
>    
> ![21](/scrapy/5-4/21.png)
    

ScrapyëŠ” ì›¹í˜ì´ì§€ ë‹¤ìš´ë¡œë“œ ì²˜ë¦¬, spiderì˜ ì½œë°± í•¨ìˆ˜ ì²˜ë¦¬ ë“±ì˜ ë‹¤ì–‘í•œ í™•ì¥ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë°ìš”. ì´ëŸ¬í•œ ê¸°ëŠ¥ì€ í”„ë¡œì íŠ¸ì˜ **middleware.py**ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **middleware.py**ì— ëŒ€í•œ ë‚´ìš©ì€ ë³¸ êµì•ˆì—ì„œëŠ” ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¶„ëŸ‰ì´ ë§¤ìš° ë°©ëŒ€í• ë¿ë”ëŸ¬ ì½”ì‚¬ë‹¤ë§ˆì˜ ì»¤ë¦¬í˜ëŸ¼ë§Œìœ¼ë¡œëŠ” ì´í•´í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ Scrapy ê³µì‹ ì‚¬ì´íŠ¸ì˜ ê´€ë ¨ ë¬¸ì„œë¥¼ ì°¸ê³ í•´ë³´ì„¸ìš”.

- [[Scrapy] Downloader Middleware](https://docs.scrapy.org/en/latest/topics/downloader-middleware.html) - ì›¹í˜ì´ì§€ ë‹¤ìš´ë¡œë“œ ì²˜ë¦¬
- [[Scrapy] Spider Middleware](https://docs.scrapy.org/en/latest/topics/spider-middleware.html?highlight=middleware) - spider ì½œë°± í•¨ìˆ˜ ì²˜ë¦¬

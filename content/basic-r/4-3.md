---
title: 'ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‹œê°í™”í•˜ê¸°'

slug: 4-3

category: '4. ë°ì´í„° ì‹œê°í™”'
---

---

### ğŸ§­ ëª©ì°¨

1. ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬
2. ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‹œê°í™”í•˜ê¸°

---

ì´ë²ˆ ì¥ì—ì„œëŠ” ì‹œê°í™”ì— íŠ¹í™”ëœ 'ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬'ì— ëŒ€í•´ í•™ìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤.

<br>

### 1) ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬

**ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬**ë¥¼ ì‚¬ìš©í•˜ë©´ ë³´ë‹¤ ì§ê´€ì ì´ê³  íš¨ìœ¨ì ì¸ ì‹œê°í™” ì‘ì—…ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ì½”ë“œ ì‘ì„±ì´ ê°„í¸í•´ì§€ê³ , ê·¸ë˜í”„ ì†ì„±ì˜ ì¶”ê°€ì™€ ì‚­ì œê°€ ììœ ë¡­ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 

ggplot2ì˜ ê¸°ë³¸ í‘œí˜„ì‹ì„ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- `ggplot(data=ë°ì´í„°ëª…, aes(x = xì¶• ë³€ìˆ˜, y = yì¶• ë³€ìˆ˜, col = ìƒ‰ìƒ ë³€ìˆ˜)) + geom_ê·¸ë˜í”„ëª…()`

  - **data**: ì‹œê°í™”í•˜ë ¤ëŠ” ë°ì´í„°

  - **aesthetics**: ì‹œê°í™”ì˜ ë¯¸í•™ì , ì‹œê°ì  ì„¤ì •  (ì˜ˆ) xì¶•, yì¶•, ì†ì„±ì˜ ìƒ‰ìƒ/ëª¨ì–‘/ì‚¬ì´ì¦ˆ ë“±

  - **geometrics**: ì‹œê°í™”ì˜ ê¸°í•˜í•™ì  í˜•íƒœ  (ì˜ˆ) ì‚°ì ë„, ë§‰ëŒ€ê·¸ë˜í”„, ì„ ê·¸ë˜í”„ ë“±

  ```python
  # ì˜ˆì‹œ: gapminder ë°ì´í„°ë¥¼ ì‚¬ìš©í•´, ëŒ€ë¥™ë³„ 1ì¸ë‹¹ GDP(gdpPercap)ì— ë”°ë¥¸ ê¸°ëŒ€ ìˆ˜ëª…(lifeExp)ì„ ì‹œê°í™”
  library(ggplot2)
  
  ggplot(data=gapminder,
    aes(x = gdpPercap, y = lifeExp, col = continent, size = pop)) +   # ë§ˆì»¤ í¬ê¸°ë¥¼ ì¸êµ¬ ìˆ˜ì— ë¹„ë¡€
    geom_point(alpha = 0.5) +   # ë§ˆì»¤ íˆ¬ëª…ë„ ì„¤ì •
    scale_x_log10()
  ```
  
  <img src="/basic-r/4-3/0.png" style="zoom:70%;">

<br>

ì—¬ê¸°ì„œ í•œ ê°€ì§€ ì£¼ëª©í•  ì ì€ 'ì‹œê°í™”ì˜ ë¯¸í•™ì , ì‹œê°ì  ì„¤ì •'ì´ (1) `aes()` ì•ˆì—ì„œ ì„¤ì •í•  ë•Œì™€ (2) `geom_()` ì•ˆì—ì„œ ì„¤ì •í•  ë•Œ ë‹¤ë¥´ê²Œ ì‘ë™í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

1. **`aes()` ì•ˆì—ì„œ ì„¤ì •í•˜ëŠ” ê²½ìš°**

   ```python
   ggplot(data=gapminder, aes(x = gdpPercap, y = lifeExp, col = 'blue')) +
     geom_point() + geom_line() + scale_x_log10()   # ê·¸ë˜í”„ ì¤‘ì²© ê°€ëŠ¥
   ```

   <img src="/basic-r/4-3/1.png" style="zoom:70%;">

   ìƒ‰ìƒì´ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•Šê³ , 'blue'ë¼ëŠ” ë¬¸ìì—´ë¡œ ì¸ì‹ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `aes()` ì•ˆì—ì„œëŠ” `col`ì— **ì†ì„±ë³€ìˆ˜ë¥¼ ì§€ì •**í•´ì•¼ ìƒ‰ìƒì´ ì œëŒ€ë¡œ ì¸ì‹ë©ë‹ˆë‹¤.

   ```python
   # 1. ì—°ì†í˜• ì†ì„±ë³€ìˆ˜ [ì™¼ìª½ ì‚¬ì§„] 
   ggplot(data=gapminder, aes(x = gdpPercap, y = lifeExp, col=year)) +
     geom_point() + geom_line() + scale_x_log10()
   
   # 2. ë²”ì£¼í˜• ì†ì„±ë³€ìˆ˜ [ì˜¤ë¥¸ìª½ ì‚¬ì§„]
   # factor(): ì—°ì†í˜• ì†ì„±ë³€ìˆ˜ë¥¼ ë²”ì£¼í˜• ì†ì„±ë³€ìˆ˜ë¡œ ë³€í™˜
   ggplot(data=gapminder, aes(x = gdpPercap, y = lifeExp, col=factor(year))) +
     geom_point() + geom_line() + scale_x_log10()
   ```

   <img src="/basic-r/4-3/1+2.png" style="zoom:70%;">

1. **`geom()` ì•ˆì—ì„œ ì„¤ì •í•˜ëŠ” ê²½ìš°**

   ```python
   ggplot(data=gapminder, aes(x = gdpPercap, y = lifeExp)) +
     geom_point(col = 'blue') + geom_line(col = 'yellow') + scale_x_log10()
   ```

   <img src="/basic-r/4-3/2.png" style="zoom:70%;">

   ìƒ‰ìƒì´ ì œëŒ€ë¡œ ì¸ì‹ë˜ì–´ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

   ë˜í•œ `aes()` ë‚´ì˜ ì„¤ì •ì€ ê·¸ë˜í”„ ì „ì²´ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ë§Œ, `geom()` ë‚´ì˜ ì„¤ì •ì€ í•´ë‹¹ ê·¸ë˜í”„ì—ë§Œ ì˜í–¥ì„ ì¤ë‹ˆë‹¤.

<br>

### 2) ggplot2 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‹œê°í™”í•˜ê¸°

ì‹œê°í™”ì˜ ëª©ì ì€ ë°ì´í„°ì— ë‚´ì¬ëœ ì˜ë¯¸, ì¦‰ ë³€í™” Â· êµ¬ì„± Â· ë¶„í¬ ë“±ì„ ëª…í™•íˆ ë“œëŸ¬ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì‹œê°í™” ë°©ë²•ì„ ëª‡ ê°€ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

**ğŸ’¡ `geom_ê·¸ë˜í”„ëª…()` í•¨ìˆ˜ì˜ ì£¼ìš” argument**

> ì¼ë‹¨ì€ ì´ëŸ° ê²Œ ìˆêµ¬ë‚˜ í•˜ê³  ì½ê³  ë„˜ì–´ê°‘ë‹ˆë‹¤.
>
> - `stat`(statistical transformation): í•´ë‹¹ ê·¸ë˜í”„ì— ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë°˜ì˜í• ì§€ ê²°ì •í•œë‹¤.
>
>   |   ì¢…ë¥˜   | ì„¤ëª…                                      | í•´ë‹¹ ê°’ì´ ê¸°ë³¸ì¸ í•¨ìˆ˜     |
>   | :------: | ----------------------------------------- | ------------------------- |
>   |  count   | yì¶•ì´ 'xì¶• ë³€ìˆ˜ ê°’ì˜ ë¹ˆë„ìˆ˜'ê°€ ëœë‹¤.      | geom_bar()                |
>   |   bin    | yì¶•ì´ 'xì¶• ë³€ìˆ˜ ê°’ì˜ êµ¬ê°„ ë¹ˆë„ìˆ˜'ê°€ ëœë‹¤. | geom_histogram()          |
>   | identity | x, yì¶•ì— ì…ë ¥ëœ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤. | geom_point(), geom_line() |
> 
> - `position`: í•´ë‹¹ ê·¸ë˜í”„ì— ë„í˜•ì„ ì–´ë–»ê²Œ ë°°ì¹˜í• ì§€ ê²°ì •í•œë‹¤.
>
>   |   ì¢…ë¥˜   | ì„¤ëª…                | í•´ë‹¹ ê°’ì´ ê¸°ë³¸ì¸ í•¨ìˆ˜     |
>   | :------: | ------------------- | ------------------------- |
>   |  stack   | ëˆ„ì  ìŒ“ê¸°(ì°¨ê³¡ì°¨ê³¡) | geom_bar()                |
>   | identity | ê²¹ì³ì„œ ê·¸ë¦¬ê¸°       | geom_point(), geom_line() |
>   |  dodge   | ì˜†ì— ê·¸ë¦¬ê¸°         |                           |

<br>

#### (1) ë¹„êµ/ìˆœìœ„: ë§‰ëŒ€ê·¸ë˜í”„

ë°ì´í„° ê°„ì˜ í¬ê¸°ë¥¼ ë¹„êµí•˜ê±°ë‚˜ ìˆœìœ„ë¥¼ ë§¤ê¸°ëŠ” ë°ëŠ” ì£¼ë¡œ ë§‰ëŒ€ê·¸ë˜í”„ê°€ ìœ ìš©í•©ë‹ˆë‹¤.

- `geom_bar()`: yì¶•ì— xì¶• ë³€ìˆ˜ ê°’ì˜ ë¹ˆë„(count)ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

  ```python
  mpg %>%
    ggplot(aes(class)) + geom_bar()
  ```

  <img src="/basic-r/4-3/3.png" style="zoom:70%;">

- `geom_col()`: yì¶•ì— xì¶• ë³€ìˆ˜ì˜ í‰ê· ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤.

  ```python
  mpg %>%
    group_by(manufacturer) %>%
    summarise(avg = mean(cty)) %>%
    ggplot(aes(manufacturer, avg)) + geom_col()
  
  # geom_col() = geom_bar(stat = 'identity')
  mpg %>%
    group_by(manufacturer) %>%
    summarise(avg = mean(cty)) %>%
    ggplot(aes(manufacturer, avg)) + geom_bar(stat = 'identity')
  ```

  <img src="/basic-r/4-3/4.png" style="zoom:70%;">

<br>

ë§‰ëŒ€ê·¸ë˜í”„ì˜ yì¶• êµ¬ì„±ìš”ì†Œë¥¼ ì„¸ë¶€ì ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ë³´ê³  ì‹¶ì€ ê²½ìš°, (1) `fill`ê³¼ (2) `position` ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

1. ê¸°ë³¸ ë§‰ëŒ€ê·¸ë˜í”„

   ```python
   diamonds %>%
     ggplot(aes(color)) +
     geom_bar()
   ```

   <img src="/basic-r/4-3/5_1.png" style="zoom:70%;">

2. `fill` ì˜µì…˜ ì‚¬ìš©

   ```python
   diamonds %>%
     ggplot(aes(color, fill = cut)) +
     geom_bar()
   ```

   <img src="/basic-r/4-3/5_2.png" style="zoom:70%;">

3. `position = 'dodge'`

   ```python
   diamonds %>%
     ggplot(aes(color, fill = cut)) +
     geom_bar(position = 'dodge')
   ```

   <img src="/basic-r/4-3/5_3.png" style="zoom:70%;">

4. `position = 'identity'`

   ```python
   # ê²¹ì³ì„œ ê·¸ë¦¬ê¸°
   # ê°’ì´ ê°€ì¥ í° ê²ƒì´ ë³´ì´ê²Œ ë¨
   diamonds %>%
     ggplot(aes(color, fill = cut)) +
     geom_bar(position = 'identity')
   ```

   <img src="/basic-r/4-3/5_4.png" style="zoom:70%;">

<br>


ë§ˆì§€ë§‰ìœ¼ë¡œ ê·¸ë˜í”„ì˜ ì¶•ê³¼ ê´€ë ¨ëœ í•¨ìˆ˜ë“¤ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

- `reorder(ì¶• ì†ì„±, ì •ë ¬ ê¸°ì¤€)`: ì¶•ì˜ ì†ì„±ê°’ì˜ <u>ì •ë ¬ìˆœì„œë¥¼ ë°”ê¿€ ë•Œ</u> ì‚¬ìš©í•œë‹¤.

  ```python
  # ì˜¤ë¦„ì°¨ìˆœ [ì™¼ìª½ ì‚¬ì§„]
  gapminder %>%
    filter(year == 2002 & continent == 'Asia') %>%
    ggplot(aes(reorder(country, pop), pop)) +        # xì¶•(country)ë¥¼ ì¸êµ¬ìˆ˜(pop)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
    geom_bar(stat = 'identity')
  
  # ë‚´ë¦¼ì°¨ìˆœ: - ì •ë ¬ê¸°ì¤€ [ì˜¤ë¥¸ìª½ ì‚¬ì§„]
  gapminder %>%
    filter(year == 2002 & continent == 'Asia') %>%
    ggplot(aes(reorder(country, -pop), pop)) +
    geom_bar(stat = 'identity')
  ```

  <img src="/basic-r/4-3/6.png" style="zoom:70%;">

- `coord_flip()`: xì¶•ê³¼ yì¶•ì˜ ìœ„ì¹˜ë¥¼ ë°”ê¿€ ë•Œ(ë’¤ì§‘ì„ ë•Œ) ì‚¬ìš©í•œë‹¤.

  - ìœ„ì¹˜ëŠ” y=x ì„ ì„ ê¸°ì¤€ìœ¼ë¡œ ë°”ë€ë‹¤.
  - ë°”ë€ ëª¨ìŠµì„ ë³´ì—¬ì¤„ ë¿, xì¶•ê³¼ yì¶• ì†ì„±ì€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.

  ```python
  gapminder %>%
    filter(year == 2002 & continent == 'Asia') %>%
    ggplot(aes(reorder(country, pop), pop)) +
    geom_bar(stat = 'identity') + coord_flip()   # ëª¨ìŠµë§Œ ë°”ë€Œì—ˆì„ ë¿,
                                                 # ì—¬ì „íˆ xì¶•ì€ country, yì¶•ì€ pop
  ```
  
  <img src="/basic-r/4-3/7.png" style="zoom:70%;">

<br>

#### (2) ë³€í™” ì¶”ì„¸: ì /ì„  ê·¸ë˜í”„

íŠ¹ì • ì‹œì ë¶€í„° ì¼ì • ê¸°ê°„ ë™ì•ˆì˜ ë°ì´í„° ê°’ì˜ ë³€í™”ë¥¼ ë³´ì—¬ì¤„ ë•ŒëŠ”, ì ê³¼ ì„  ê·¸ë˜í”„ë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

``` python
gapminder %>%
  filter(country == 'Korea, Rep.') %>%
  ggplot(aes(year, lifeExp, col=country)) +
  geom_point() + geom_line()
```

<img src="/basic-r/4-3/8.png" style="zoom:70%;">

<br>

ì¶”ê°€ë¡œ `geom_smooth()` í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ë°ì´í„°ì˜ í‰ê· ì ì¸ ì¶”ì„¸ì„ ì„ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
gapminder %>%
  ggplot(aes(year, lifeExp, col=continent)) +
  geom_point(alpha=0.3) + geom_smooth()
```

<img src="/basic-r/4-3/9.png" style="zoom:70%;">

<br>

#### (3) ë¶„í¬ í˜¹ì€ êµ¬ì„± ë¹„ìœ¨: íˆìŠ¤í† ê·¸ë¨ /ë°•ìŠ¤í”Œë¡¯

ë¶„í¬ë¥¼ ë³´ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ ì†ì„±ì´ ì—°ì†í˜• ë³€ìˆ˜ì¸ ê²½ìš° íˆìŠ¤í† ê·¸ë¨ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ğŸ’¡ ì—°ì†í˜• ë³€ìˆ˜ v.s. ë²”ì£¼í˜• ë³€ìˆ˜**

> - **ì—°ì†í˜• ë³€ìˆ˜**(continuous)
>   - í¬ê¸°ì™€ ì–‘ì„ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜ë¡œ êµ¬ê°„ì´ ì—°ì†ëœë‹¤.
>   - ë¶„í¬ ì‹œê°í™”: íˆìŠ¤í† ê·¸ë¨(histogram) ì‚¬ìš©
> - **ë²”ì£¼í˜• ë³€ìˆ˜**(categorical + discrete)
>   - ëŒ€ìƒì„ ë¶„ë¥˜í•˜ëŠ” ì˜ë¯¸ë¥¼ ê°–ëŠ” ë³€ìˆ˜ë¡œ êµ¬ê°„ì´ ëŠì–´ì§„ë‹¤.
>   - ë¶„í¬ ì‹œê°í™”: ë§‰ëŒ€ê·¸ë˜í”„(barplot) ì‚¬ìš©

- `geom_histogram()`

  ```python
  gapminder %>%
    filter(year == 1997) %>%
    ggplot(aes(lifeExp)) + geom_histogram()
  ```

  <img src="/basic-r/4-3/10.png" style="zoom:70%;">

<br>

ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ íŠ¹ì • ì†ì„±ì´ ì•„ë‹Œ, ì—¬ëŸ¬ í•­ëª©ì˜ ë¶„í¬ë¥¼ ë™ì‹œì— ë¹„êµí•˜ê³  ì‹¶ë‹¤ë©´ ë°•ìŠ¤í”Œë¡¯ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

- `geom_boxplot()`

  ```python
  gapminder %>%
    filter(year == 1997) %>%
    ggplot(aes(continent, lifeExp)) + geom_boxplot()
  ```

  <img src="/basic-r/4-3/11.png" style="zoom:70%;">

  ìœ„ ê·¸ë˜í”„ì—ì„œ ì ì€ ì´ìƒê°’(ì •ìƒ ë¶„í¬ì—ì„œ ë²—ì–´ë‚œ ë°ì´í„°)ìœ¼ë¡œ, ë°ì´í„° ì •ì œ ê³¼ì •ì—ì„œ ì œê±°í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ ë°•ìŠ¤í”Œë¡¯ì€ ì´ìƒê°’ í™•ì¸ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤.

